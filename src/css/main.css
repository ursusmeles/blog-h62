/**
 * HELIOCANTHARUS RPG | blog.h62.pl
 * System: CUBE CSS Architecture
 */

/* LAYER MANIFEST */
@layer reset, tokens, base, composition, utilities, blocks;

/* FONTS DEFINITION */
@font-face {
  font-family: 'ABC Solar';
  src: url('/fonts/abcsolar.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'IBM Plex Sans';
  src: url('/fonts/ibm-regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'IBM Plex Sans';
  src: url('/fonts/ibm-italics.woff2') format('woff2');
  font-weight: 400;
  font-style: italic;
  font-display: swap;
}

@font-face {
  font-family: 'IBM Plex Sans';
  src: url('/fonts/ibm-700.woff2') format('woff2');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

/* TOKENS */
@layer tokens {
  :root {
    /* Spacing Scale */
    /* @link https://utopia.fyi/space/calculator?c=360,16,1.125,1440,18,1.2,5,1,&s=0.75|0.5|0.25,1.5|2|3|4|6|10,s-4xl&g=s,l,xl,12 */
    --space-3xs: clamp(0.25rem, 0.2292rem + 0.0926vw, 0.3125rem);
    --space-2xs: clamp(0.5rem, 0.4792rem + 0.0926vw, 0.5625rem);
    --space-xs: clamp(0.75rem, 0.7083rem + 0.1852vw, 0.875rem);
    --space-s: clamp(1rem, 0.9583rem + 0.1852vw, 1.125rem);
    --space-m: clamp(1.5rem, 1.4375rem + 0.2778vw, 1.6875rem);
    --space-l: clamp(2rem, 1.9167rem + 0.3704vw, 2.25rem);
    --space-xl: clamp(3rem, 2.875rem + 0.5556vw, 3.375rem);
    --space-2xl: clamp(4rem, 3.8333rem + 0.7407vw, 4.5rem);
    --space-3xl: clamp(6rem, 5.75rem + 1.1111vw, 6.75rem);
    --space-4xl: clamp(10rem, 9.5833rem + 1.8519vw, 11.25rem);

    /* One-up pairs */
    --space-3xs-2xs: clamp(0.25rem, 0.1458rem + 0.463vw, 0.5625rem);
    --space-2xs-xs: clamp(0.5rem, 0.375rem + 0.5556vw, 0.875rem);
    --space-xs-s: clamp(0.75rem, 0.625rem + 0.5556vw, 1.125rem);
    --space-s-m: clamp(1rem, 0.7708rem + 1.0185vw, 1.6875rem);
    --space-m-l: clamp(1.5rem, 1.25rem + 1.1111vw, 2.25rem);
    --space-l-xl: clamp(2rem, 1.5417rem + 2.037vw, 3.375rem);
    --space-xl-2xl: clamp(3rem, 2.5rem + 2.2222vw, 4.5rem);
    --space-2xl-3xl: clamp(4rem, 3.0833rem + 4.0741vw, 6.75rem);
    --space-3xl-4xl: clamp(6rem, 4.25rem + 7.7778vw, 11.25rem);

    /* Custom pairs */
    --space-s-4xl: clamp(1rem, -2.4167rem + 15.1852vw, 11.25rem);
    
    /* Type scale */
    --step--1: clamp(0.8889rem, 0.8727rem + 0.072vw, 0.9375rem);
    --step-0: clamp(1rem, 0.9583rem + 0.1852vw, 1.125rem);
    --step-1: clamp(1.125rem, 1.05rem + 0.3333vw, 1.35rem);
    --step-2: clamp(1.2656rem, 1.1475rem + 0.525vw, 1.62rem);
    --step-3: clamp(1.4238rem, 1.2504rem + 0.7706vw, 1.944rem);
    --step-4: clamp(1.6018rem, 1.3581rem + 1.083vw, 2.3328rem);
    --step-5: clamp(1.802rem, 1.4696rem + 1.4775vw, 2.7994rem);

    /* Typography */
    --font-brand: 'ABC Solar', system-ui, sans-serif;
    --font-base: 'IBM Plex Sans', system-ui, sans-serif;
    --font-bold: 700;

    /* Leading (Line Height) */
    --tight: 1.1;
    --mid: 1.3;
    --loose: 1.6;

    /* Layout */
    --gutter: var(--space-s-4xl);

    /* Border radius */
    --radius-s: 0.125rem;
    --radius-m: 0.25rem;
    --radius-l: 0.5rem;
    --radius-pill: 999px;

    /* Elevation (shadows) */
    --elevation-1: 0 1px 2px color-mix(in oklch, var(--color-text), transparent 90%);
    --elevation-2: 0 4px 6px color-mix(in oklch, var(--color-text), transparent 80%);
    --elevation-3: 0 10px 15px color-mix(in oklch, var(--color-text), transparent 70%);

    /* Z-index */
    --z-default: 0;
    --z-dropdown: 1000;
    --z-modal: 1100;

    /* Transition */
    --transition-default: all 0.18s ease-out;
    --transition-move: transform 0.3s linear;
    --transition-fade: opacity 0.3s ease-in-out;

    /* Strokes */
    --stroke-thin: 1px solid;
    --stroke-thick: 2px solid;
    --stroke-dashed: 1px dashed;

    /*  Hues */
    --hue-primary: 273;
    --hue-secondary: 162;
    --hue-offwhite: 273;
    --hue-offblack: 285;

    /* Primary palette */
    --primary-lll:  oklch(0.735 0.14 var(--hue-primary));
    --primary-ll:   oklch(0.62  0.21 var(--hue-primary));
    --primary-l:    oklch(0.54  0.25 var(--hue-primary));
    --primary:      oklch(0.44  0.26 var(--hue-primary));
    --primary-d:    oklch(0.38  0.24 var(--hue-primary));
    --primary-dd:   oklch(0.315 0.20 var(--hue-primary));
    --primary-ddd:  oklch(0.185 0.12 var(--hue-primary));

    /* Secondary palette */
    --secondary-lll:  oklch(0.965 0.05  var(--hue-secondary));
    --secondary-ll:   oklch(0.93  0.11  var(--hue-secondary));
    --secondary-l:    oklch(0.865 0.19  var(--hue-secondary));
    --secondary:      oklch(0.815 0.185 var(--hue-secondary));
    --secondary-d:    oklch(0.66  0.14  var(--hue-secondary));
    --secondary-dd:   oklch(0.561 0.12  var(--hue-secondary));
    --secondary-ddd:  oklch(0.484 0.1   var(--hue-secondary));
    --secondary-dddd: oklch(0.33  0.07  var(--hue-secondary));

    /* Off colors */
    --offwhite: oklch(0.84  0.01 var(--hue-offwhite));
    --offblack: oklch(0.16 0.012 var(--hue-offblack));

    /* Semantic colors */
    --color-bg: var(--offblack);
    --color-text: var(--offwhite);
    --color-text-secondary: var(--secondary-ll);

    --color-surface-level-1: var(--primary-ddd);
    --color-surface-level-2: var(--primary-dd);
    --color-surface-level-3: var(--primary-d);
    
    --color-border-level-1: var(--primary-dd);
    --color-border-level-2: var(--primary-d);
    --color-border-level-3: var(--primary);
    
    --color-accent: var(--primary);
    --color-accent-less: var(--primary-dd);
    --color-on-accent: var(--primary-ddd);
    
    --color-clickable: var(--secondary);
    --color-selection: var(--secondary-l);
    --color-hover: var(--secondary-ll);
    --color-clickable-muted: var(--secondary-d);
    --color-clickable-less: var(--secondary-dddd);

  }
@media (prefers-color-scheme: light) {
  :root:not([data-theme="dark"]) {
    --color-bg: var(--offwhite);
    --color-text: var(--offblack);
    --color-text-secondary: var(--primary-ddd);

    --color-surface-level-1: var(--secondary-lll);
    --color-surface-level-2: var(--secondary-ll);
    --color-surface-level-3: var(--secondary-l);
    
    --color-border-level-1: var(--secondary-ll);
    --color-border-level-2: var(--secondary-l);
    --color-border-level-3: var(--secondary);
    
    --color-accent: var(--secondary);
    --color-accent-less: var(--secondary-l);
    --color-on-accent: var(--offwhite);
    
    --color-clickable: var(--primary); 
    --color-selection: var(--primary-d);
    --color-hover: var(--primary-dd);
    --color-clickable-less: var(--primary-lll);
    --color-clickable-muted: var(--primary-l);
  }
}

[data-theme="light"] {
    --color-bg: var(--offwhite);
    --color-text: var(--offblack);
    --color-text-secondary: var(--primary-ddd);

    --color-surface-level-1: var(--secondary-lll);
    --color-surface-level-2: var(--secondary-ll);
    --color-surface-level-3: var(--secondary-l);
    
    --color-border-level-1: var(--secondary-ll);
    --color-border-level-2: var(--secondary-l);
    --color-border-level-3: var(--secondary);
    
    --color-accent: var(--secondary);
    --color-accent-less: var(--secondary-l);
    --color-on-accent: var(--offwhite);
    
    --color-clickable: var(--primary); 
    --color-selection: var(--primary-d);
    --color-hover: var(--primary-dd);
    --color-clickable-less: var(--primary-lll);

}

[data-theme="dark"] {
    --color-bg: var(--offblack);
    --color-text: var(--offwhite);
    --color-text-secondary: var(--secondary-ll);

    --color-surface-level-1: var(--primary-ddd);
    --color-surface-level-2: var(--primary-dd);
    --color-surface-level-3: var(--primary-d);
    
    --color-border-level-1: var(--primary-dd);
    --color-border-level-2: var(--primary-d);
    --color-border-level-3: var(--primary);
    
    --color-accent: var(--primary);
    --color-accent-less: var(--primary-dd);
    --color-on-accent: var(--primary-ddd);
    
    --color-clickable: var(--secondary);
    --color-selection: var(--secondary-l);
    --color-hover: var(--secondary-ll);
    --color-clickable-less: var(--secondary-dddd);}
}

/* RESET */
@layer reset {

/* Box sizing rules */
*,
*::before,
*::after {
  box-sizing: border-box;
}

/* Prevent font size inflation */
html {
  -moz-text-size-adjust: none;
  -webkit-text-size-adjust: none;
  text-size-adjust: none;
}

/* Remove default margin in favour of better control in authored CSS */
body, h1, h2, h3, h4, h5, p,
figure, blockquote, dl, dd {
  margin-block-end: 0;
}

/* Remove list styles on ul, ol elements with a list role, which suggests default styling will be removed */
ul[role='list'],
ol[role='list'] {
  list-style: none;
}

/* Set core body defaults */
body {
  min-height: 100vh;
  line-height: 1.6;
}

/* Set shorter line heights on headings and interactive elements */
h1, h2, h3, h4, h5,
button, input, label {
  line-height: 1.1;
}

/* Balance text wrapping on headings */
h1, h2,
h3, h4, h5 {
  text-wrap: balance;
}

/* A elements that don't have a class get default styles */
a:not([class]) {
  text-decoration-skip-ink: auto;
  color: currentColor;
}

/* Make images easier to work with */
img,
picture {
  max-width: 100%;
  display: block;
  user-select: none;
  -webkit-user-drag: none;
}

/* Inherit fonts for inputs and buttons */
input, button,
textarea, select {
  font-family: inherit;
  font-size: inherit;
}

/* Make sure textareas without a rows attribute are not tiny */
textarea:not([rows]) {
  min-height: 10em;
}

/* Anything that has been anchored to should have extra scroll margin */
:target {
  scroll-margin-block: 5lh;
}



}

/* BASE (global element styling) */
@layer base {
  ::selection {
    background-color: var(--color-selection);
    color: var(--color-bg);
  }

:focus {
  outline: none;
}

:focus-visible {
  outline: var(--stroke-thick) var(--color-accent);
  outline-offset: var(--focus-offset, 0.2lh);
}

  body {
    background-color: var(--color-bg);
    font-family: var(--font-base);
    font-size: var(--step-0);
    line-height: var(--loose);
    color: var(--color-text);
    display: grid;
    grid: auto 1fr auto /
      [full-start] minmax(var(--gutter), 1fr) 
      [content-start] min(100% - (var(--gutter) * 2), 70rem) 
      [content-end] minmax(var(--gutter), 1fr) [full-end];
  }

  body > * {
    grid-column: content;
  }

  a {
  color: var(--color-clickable);
  text-decoration: none;
  transition: var(--transition-default);
  &:hover {
      color: var(--color-hover);
      text-decoration: underline;
      text-decoration-thickness: 2px;
      text-underline-offset: 0.3em;}
  &:active {
      color: var(--color-selection);
      text-decoration: underline;
      text-decoration-thickness: 2px;
      text-underline-offset: 0.3em;

  }
}

/* Headings */

  h1, h2, h3, h4 {
    font-family: var(--font-brand);
    color: var(--color-text);
  }

  h1:not(.header__brand) {
    font-size: var(--step-5);
    line-height: var(--tight);
    letter-spacing: -0.01em;
    max-width: 20ch;
  }

  h2 {
    font-size: var(--step-4);
    line-height: var(--tight);
    letter-spacing: normal;
    max-width: 35ch;
    &::before{
      content: "#";
      display: inline-block;
      margin-inline-end: 0.25ch;
      color: var(--color-accent-less);
    }
  }

  h3 {
    font-size: var(--step-3);
    line-height: var(--mid);
    letter-spacing: 0.01em;
    max-width: 35ch;
  }

  h4 {
    font-size: var(--step-2);
    line-height: var(--mid);
    letter-spacing: 0.02em;
  }

  h5 {
    font-family: var(--font-base);
    font-size: var(--step-1);
    font-weight: 700;
    line-height: var(--tight);
    letter-spacing: normal;
  }

  /* Text elements */

  p {
    max-width: 70ch;
  }

  small {
  font-size: var(--size-step--1);
}

  blockquote {
    font-style: italic;
    border-inline-start: 4px solid var(--color-accent-less);
    padding-inline-start: var(--space-m);
    margin-block: var(--space-m);
    color: color-mix(in oklch, var(--color-text), transparent 30%);
  }

  ins {
  text-decoration: none;
  background: var(--color-accent);
  color: var(--color-on-accent);
  padding-inline: 0.3em;
}

kbd {
  border: var(--stroke-thin) var(--color-text-secondary);
  padding-block-end: 0.1em;
}

/* Tabular data */

  table {
    width: 100%;
    border-collapse: collapse;
    border: var(--stroke-thick) var(--color-border-level-3);
    font-size: var(--step--1);
    font-family: var(--font-base);
  }

  th {
    text-align: left;
    line-height: var(--tight);
    border-bottom: var(--stroke-thick) var(--color-border-level-2);
    padding: var(--space-xs) var(--space-s);
  }

  thead th {
  padding-block: var(--space-s);
}

  td {
    padding: var(--space-xs) var(--space-s);
    border-bottom: var(--stroke-thin) var(--color-border-level-1);
  }

  th:not(:only-of-type) {
  border-block-end: var(--stroke-thick);
}

th:only-of-type {
  border-inline-end: var(--stroke-thick);
}

:is(th, td) ~ :is(th, td) {
  border-inline-start: var(--stroke-thick);
}

tr + tr :is(th, td) {
  border-block-start: var(--stroke);
}

caption {
  caption-side: bottom;
  margin-block-start: var(--space-s);
}

/* Article */

article {
  /* --- Core Typography & Layout --- */
  max-width: 65ch;
  font-size: var(--step-1);
  --flow-space: var(--space-s-m);
  hyphens: auto;
  hyphenate-limit-chars: 6 3 3;
  text-wrap: pretty;
  margin-block-end: var(--space-3xl);

  /* --- Headings --- */
  & :is(h1, h2, h3, h4, h5) {
    overflow-wrap: anywhere;
  }

  /* Logic: Sets a smaller gap for the element immediately following a heading */
  & :is(h1, h2, h3, h4, h5) + *:not([class]) {
    --flow-space: var(--space-xs-s);
  }

  /* Logic: Adds large spacing above headings, unless it's the very first element */
  & * + :is(h2, h3, h4, h5) {
  --flow-space: var(--space-xl);
    margin-block-start: var(--flow-space);
  }

  /* --- Links --- */
  & a {
    color: currentColor;
    text-decoration: underline;
    text-decoration-thickness: 2px;
    text-underline-offset: 0.3em;
    text-decoration-color: var(--color-accent);

    &:hover {
      color: currentColor;
      text-decoration: underline;
      text-decoration-color: var(--color-accent-less);
      transition: var(--transition-default);
    }
  }

  /* --- General List Logic --- */
  & :is(ul, ol) {
    --flow-space: var(--space-2xs);
    padding-inline-start: var(--space-m);
  }

  & :is(ol, ul):not([class]) li + li {
    margin-block-start: var(--space-2xs);
  }

  /* --- Unordered Lists (ul) --- */
  & ul:not([class]) {
    list-style-type: disc;

    & > li {
      padding-inline-start: var(--space-xs);
    }

    & ::marker {
      font-size: 0.8lh;
      color: var(--color-accent);
    }
  }

  /* --- Ordered Lists (ol) --- */
  & ol ::marker {
    font-size: 1em;
    font-weight: var(--font-bold);
  }

  /* --- Media --- */
  & :is(img, picture, video) {
    border: var(--stroke-thin);
    border-radius: var(--radius-s);
  }
}

/* Lists with classes and roles will be out of standard flow, so remove the default spacing */
[role='list'][class],
[role='tablist'][class] {
  margin-block: 0;
  padding: 0;
}

/* Description lists */

dt {
  font-weight: var(--font-bold);
}

dt + dd {
  margin-block-start: var(--space-xs);
}

dd + dt {
  margin-block-start: var(--space-s);
}

dd {
  margin-inline-start: 1.5ch;
}

/* Horizontal rules */

  hr {
    overflow: visible;
    border: 0;
    height: 1px;
    background-image: linear-gradient(
      to right, 
      transparent,
      var(--color-border-level-1), 
      transparent
    );
    margin-block: var(--space-xl);
    width: 100%;
    margin-inline: auto;
    &::after {
    content: 'â—ˆ';
    display: block;
    text-align: center;
    color: var(--color-accent);
    font-size: var(--step-0);
    transform: translateY(-50%);
    background: var(--color-bg);
    width: var(--space-l);
    margin: 0 auto;
  }
}

/* Media elements */

:is(video, iframe[src*='youtube'], iframe[src*='vimeo']) {
  display: block;
  width: 100%;
  height: auto;
  aspect-ratio: 16/9;
}

img {
  height: auto;
  max-width: 100%;
  display: block;
}

figcaption {
  padding-block-start: 0.5em;
  font-size: var(--size-step--1);
}

svg:not([class]) {
  width: auto;
  height: 1lh;
}

svg {
  flex-shrink: 0;
}

svg[role='img'][width][height] {
  width: revert;
  height: revert;
  background: var(--color-surface-level-1);
  padding: var(--space-s);
}

/* Header and navigation */

header {
  padding-block: var(--space-m-l);
  --stack-space: var(--space-xs);
  & ul{
    display: flex;
    flex-direction: row;
    gap: var(--space-s-m);
  }
}

header div, header h1 {
    border-bottom: var(--stroke-thin) var(--color-clickable);
}

nav {
    & a {
        font-size: var(--step--1);
        color: var(--color-text-secondary);
        background-color: var(--color-clickable-less);
        padding-inline: var(--space-xs);
        padding-block: 0.125em;
        border-radius: var(--radius-s);
        transition: var(--transition-default);
        &:hover {
            background-color: var(--color-hover);
            color: var(--color-bg);
            text-decoration: none;
        }
    }
}
/* Forms */
form > *:not(input[type="hidden"]) + * {
  margin-top: var(--flow-space, 1rem);
}

:is(input, select, textarea) {
  accent-color: var(--color-accent);
}

:is(input:not([type='checkbox'], [type='radio'], [type='color']), select, textarea) {
  padding: 0.5em 0.8em;
  border-radius: var(--radius-s);
  border: var(--stroke-thin);
  background: var(--color-surface-level-1);
  color: var(--color-text);
  width: 100%;

  &::placeholder {
    color: var(--color-text-secondary);
  }
}

label {
  line-height: var(--leading-tight);
  font-weight: 400;
}

label::after {
  content: '\A';
  white-space: pre;
}

/* Usually label wraps checkbox and radio buttons, so we give ourselves more layout and text-flow control with flex */
label:has(input) {
  display: flex;
  align-items: baseline;
  gap: var(--space-s);
  font-weight: 400;
}

label:has(input) + label:has(input) {
  --flow-space: var(--space-s-m);
}

/* Slightly adjusts the vertical position of the check/radio */
label:has(input) input {
  transform: translateY(-0.1ex);
}

input:disabled {
  background: mix(var(--color-surface-level-2), transparent(80%));
}

input:disabled,
label input:disabled + * {
  cursor: not-allowed;
}

fieldset {
  border: var(--stroke-dashed);
  padding: var(--space-s);
}

legend {
  font-weight: 400;
  padding-inline: var(--space-xs);
}

/* Details and summary */

summary {
  font-weight: var(--font-bold);
  cursor: pointer;
}

details[open] summary {
  margin-block-end: var(--space-s);
}
}

/* 6. COMPOSITION (structural patterns) */
@layer composition {
  .flow > * + * {
    margin-block-start: var(--flow-space, 1em);
  }

  .stack {
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
}

.stack > * {
  margin-block: 0;
} 

.stack > * + * {
  margin-block-start: var(--stack-space, 1.5rem);
}

.full-bleed {
    grid-column: full;
  }
}

/* UTILITIES LAYER (single purpose classes)*/
@layer utilities {
.visually-hidden {
    border: 0;
    clip: rect(0 0 0 0);
    clip-path: inset(50%);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
    white-space: nowrap;
  }
}

/* BLOCKS LAYER (specific components) */
@layer blocks {
  .skip-link {
  position: absolute;
  left: -9999px;
  z-index: 999;
  padding: 1em;
  background-color: black;
  color: white;
  opacity: 0;
}

.skip-link:focus {
  left: 50%;
  transform: translateX(-50%);
  opacity: 1;
}

.header__top {
  display: flex;
  align-items: baseline;
  flex-wrap: wrap;
  gap: 0 var(--space-xs);
  &:first-child {
    white-space: nowrap;
    flex-shrink: 0;
  }
  & nav {
    margin-inline-start: auto;
    flex-basis: auto;
    display: flex;
    justify-content: flex-start;
}
}

.header__brand{
    margin: 0;
    padding-inline: 0;
    padding-block: var(--space-xs);
    font-size: inherit;
    line-height: 0;
    width: 100%;
}

.logo-mask {
  display: block;
  aspect-ratio: 9 / 1;
  position: relative;
  
  /* Mask */
  -webkit-mask-image: url('/img/heliocantharus-logo.svg');
  mask-image: url('/img/heliocantharus-logo.svg');
  -webkit-mask-size: contain;
  mask-size: contain;
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-position: center;
  mask-position: center;

  /* Base gradient */
  background: linear-gradient(
    to bottom, 
    var(--color-clickable-muted) 30%, 
    var(--color-clickable) 100%
  );

  /* Transition */
  &::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
    to bottom, 
    var(--color-clickable) 30%, 
    var(--color-clickable) 100%
  );
    opacity: 0; /* Hidden by default */
    transition: opacity 0.3s ease-in-out;
  }
  &:hover::after {
    opacity: 1;
  }
}

.theme-switch {
  --switch-height: var(--space-l);
  --padding: 2px;
  --thumb-size: calc(var(--switch-height) - (var(--padding) * 2) - 2px); /* -2px accounts for the 1px borders */
  --switch-width: calc((var(--thumb-size) * 2) + (var(--padding) * 4) + 2px); /* width of two thumbs + padding on both sides + 2px for borders */

  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-around;
  
  width: var(--switch-width);
  height: var(--switch-height);
  padding: var(--padding);
  
  background: var(--color-surface-level-1);
  border: 1px solid var(--color-border-level-1);
  border-radius: var(--radius-m);
  cursor: pointer;
  transition: var(--transition-fade);
  
  box-sizing: border-box; 
}

.theme-switch__thumb {
  position: absolute;
  top: 50%;
  left: var(--padding);
  transform: translateY(-50%);
  
  width: calc(var(--thumb-size) + (var(--padding)));
  height: var(--thumb-size);
  background: var(--color-surface-level-2);
  border-radius: calc(var(--radius-m) * 0.8); /* smaller radius for nested look */
  
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), background 0.3s ease;
  z-index: 1;
}

.theme-switch__icon {
  position: relative;
  z-index: 2;
  display: flex;
  align-items: center;
  justify-content: center;
  
  width: 1rem; 
  height: 1rem;
  
  color: var(--color-clickable-less);
  transition: color 0.3s ease, opacity 0.3s ease;
  pointer-events: none; /* Let clicks pass through to the button */

  /* Ensure the SVG itself fills the icon container */
  & svg {
    width: 100%;
    height: 100%;
    display: block;
  }
}

[data-theme="light"] .theme-switch__thumb {
  transform: translateY(-50%) translateX(calc(var(--thumb-size) + var(--padding)));
}

[data-theme="dark"] .moon,
[data-theme="light"] .sun {
  color: var(--color-clickable-muted);
  opacity: 1;
}

/* 3. Inactive States */
[data-theme="dark"] .sun,
[data-theme="light"] .moon {
  color: var(--color-clickable-less);
  opacity: 0.9;
}
}